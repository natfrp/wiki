# 常见问题: 网络相关问题

## 内网穿透无法达到标称的带宽速度 {#bandwidth-issue}

- 我们标称的速度单位通常为 `Mibps`，即 **mebibits per second**

   单位换算公式为 `1 MiB/s = 8 Mibps`，例如您的限速显示为 `36 Mibps`，则通过内网穿透下载文件时可以看到的最大速度应该是 `4.5 MiB/s`。

- 内网穿透的速度还受限于您 **运行 frpc 的电脑** 的 **上行带宽**

   您可以使用 **运行 frpc 的电脑** 访问 [speedtest.net](https://www.speedtest.net)，点击 `GO` 进行测速，测速完成后显示的 `UPLOAD` 速度就是您的实际上行带宽。

   例如，在下面这张截图中，实际上行带宽只有 `2.11 Mibps`，也就是说即使我们限速 `36 Mibps`，通过内网穿透下载文件也只能得到 `2.11 Mibps = 263 KiB/s` 的下载速度。

  ![](./_images/network-speedtest.png)  
  _* 图中显示的是 Mbps，实际上应该是 Mibps 才对。不过很少有人会把那个 i 写出来。_

- 节点带宽由所有用户共享，因此节点负载过高时您可能无法获取到标称带宽

   例如，节点标称带宽为 `100 M`，假如有 5 个限速为 `36 Mibps` 的用户同时通过这个节点穿透一个大文件并下载，那么可能这 5 个人都只能获取到 `20 Mibps = 2.5 MiB/s` 的下载速度。当然，由于各个用户的网络质量不同，可能有的用户能获得 `36 Mibps = 4.5 MiB/s` 的下载速度，有的用户只有几百 KiB/s 的速度。

   免费节点在特定日期区间中可能长期处于超载状态，如果您是 VIP 用户，我们推荐您使用 VIP 节点获取更好的使用体验。  
   _* 免费节点可能会根据负载情况得到扩容，但并不保障。VIP 节点出现饱和时我们会尽快进行扩容。_

- 许多游戏服务器对节点性能影响较为严重，我们推荐您谨慎使用 SakuraFrp 穿透未经优化的游戏服务器

   因为许多游戏的设计问题，流量 PPS 可能较高，受限于我们服务器的处理性能，您可能会遇到 延迟 / 丢包 体验。  

## 流量经过节点时如何计费 {#traffic-billing}

我们的计费模式是 **对 frpc-frps 间的上行、下行流量计费**，但 **不包括额外的协议开销**。

下图展示了流量通过 frp 节点并转发到您本地服务器的一个简单拓扑：

![](../_images/basics-5.svg)

#### 当电脑 D 的客户端发送了 100 KiB 数据到节点时

1. 节点接收到 100 KiB (数据+元数据)  
1. 节点将数据转发到 **电脑 A 的 frpc**，由于协议开销可能要发送 **101 KiB** 数据  
   _* 此时我们会从您的账户中 **扣除 100 KiB 流量**_
1. **电脑 A 的 frpc** 收到数据后将 **100 KiB** 数据发送给游戏服务器  
   _* 此过程在本地进行，流量不会被计费_

简而言之，节点与穿透客户端间传送了 **100 KiB** (数据+元数据)，您的账户就会被扣除 **100 KiB 流量**，协议开销的 **1 KiB** 不会被计费。

#### 当电脑 A 的服务器发送了 200 KiB 数据到 frpc 时

1. frpc 接收到 200 KiB (数据+元数据)  
   _* 此过程在本地进行，流量不会被计费_
1. frpc 将数据转发到节点，由于协议开销可能要发送 **201 KiB** 数据  
   _* 此时我们会从您的账户中 **扣除 200 KiB 流量**_
1. 节点收到来自 frpc 的数据后将 **200 KiB** 数据发送给 **电脑 D 的客户端**

简而言之，节点与穿透客户端间传送了 **200 KiB** (数据+元数据)，您的账户就会被扣除 **200 KiB 流量**，协议开销的 **1 KiB** 不会被计费。

## 节点有 IPv6 支持吗 {#ipv6-support}

所有穿透节点均不支持使用 IPv6 进行连接，并且我们也没有提供 IPv6 支持的计划。

由于主站和各 API 结点均提供 IPv6 支持，授权访问时服务端可能无法自动获取到您的 IPv4 地址，需要您手动指定。

## SakuraFrp 管理面板打不开怎么办 {#admin-panel-inaccessible}

通常这是由各种神秘的网络问题造成的，也可能是我们的服务器遭到了较为严重的攻击。请尝试以下方法:

- 更换设备访问 (如手机更换为电脑)
- 更换网络环境访问 (如 WiFi 更换为 4G、5G 网络)
- 更换浏览器访问 (推荐使用 Google Chrome / Microsoft Edge / Firefox)
- 查看 [状态监控页面](https://status.natfrp.com/) 中 `Sakura Frp 主站` 监测点是否正常
- 查看 [SakuraFrp 状态通知频道](https://t.me/natfrp_status) 是否有故障通知  
  _* 您可能无法在中国内地境内直接访问此频道_
- 如果您在官方用户群中，可以查看群内是否有相关通知或在群中发送无法访问面板的错误截图进行咨询

## 使用 UDP 的游戏无法通过内网穿透访问 {#udp-game-issue}

部分使用 UDP 协议传输数据的游戏服务端要求远程端口与本地配置的端口一致才能正常进行通信。

如果使用 UDP 隧道的游戏正常无法连接，请尝试修改游戏服务器配置文件中的 `监听端口`，使其与隧道的 `远程端口` 一致。

::: tip
别忘了编辑隧道把 `本地端口` 也改成同样的值
:::

## 使用校园/公司网无法连接服务器 {#zoned-network-restriction}

具体表现为：隧道无法连接并持续提示 `请检查网络连接`，手机 **关闭Wi-Fi** 并 **使用流量** 开启热点，**电脑连接热点** 后又可以正常连接隧道。

此问题通常源于您的网管决定屏蔽我们的服务以保障内网的安全。

对于公司网用户，请查看此文：[小米公司员工私自将公司内网端口映射到公网](https://www.v2ex.com/t/726197)

对于校园网用户，请先了解：

- 您所在的网络环境是否存在与国家安全相关的研究？
- 您所在的网络环境是否存在访问敏感性内容的可能性（如学校老师列表或内部服务器）？
- 您的电脑中是否在您不经意间存储了敏感的内容（如某老师的研究报告或学生名单）？

::: danger 安全警告
即使其他人都在泄密且看起来并无大碍，您不经意间造成的泄密仍然会为您招致巨大的人身安全风险。
:::

:::: details 在展开绕过方案前，请确认您本地穿透的服务不会导致外部流量控制您的电脑
:::: details 在展开绕过方案前，请确认您进行内网穿透被发现后也不会造成人身安全风险
:::: details 在展开绕过方案前，请确认您已经了解继续操作的风险，包括但不限于辞退、退学、以及刑事责任

您只需打开高级设置中的 `强制使能 frpc TLS` 选项，即可绕过大部分的监管。

::::
